import{af as C,y as $,c,o as u,a as o,g as p,h as V,u as r,U as Y,t as v,s as y,b as x,I as K,F as A,j,E as X,ah as Z,n as E,ai as ee,aj as D,w,e as S,ak as te,q as T,al as z,x as P,d as B,L as M,am as ne,an as ae,ao as se,C as oe,m as re,ae as L,ap as le,aq as ie,ar as de}from"./vendor-3-7-79.js";import{u as f}from"./CheckoutStore-3-7-79.js";import{_ as ue}from"./_plugin-vue_export-helper-3-7-79.js";import{u as ce}from"./ajax-3-7-79.js";import{p as U}from"./store-3-7-79.js";const me=l=>{const e=document.getElementById("_gpos_nonce").value,n=C.random.getBytesSync(16),i=C.cipher.createCipher("AES-CBC",C.util.hexToBytes(C.md.sha256.create().update(e).digest().toHex()));return i.start({iv:n}),i.update(C.util.createBuffer(l,"utf8")),i.finish(),{hex:i.output.toHex(),iv:C.util.bytesToHex(n)}},pe=["value"],_e=["value"],Ft={__name:"Fragments",setup(l){const e=$("");return document.addEventListener("gpos-inputs-changed",async n=>{e.value=me(JSON.stringify(n.detail)),window.gpos.fragment={_wp_refreshed_fragments:e.value.hex,_wp_fragment:e.value.iv}}),(n,i)=>(u(),c("div",null,[o("input",{type:"hidden",name:"_wp_refreshed_fragments",value:e.value.hex},null,8,pe),o("input",{type:"hidden",name:"_wp_fragment",value:e.value.iv},null,8,_e)]))}},ve={class:"w-full bg-red-200 text-red-700 p-3 rounded font-semibold flex gap-2"},Vt={__name:"GatewayError",setup(l){return(e,n)=>(u(),c("div",ve,[p(r(Y),{class:"w-10"}),V(" "+v(e.$t("gateway_error")),1)]))}},fe={key:0,class:"bg-yellow-100 text-yellow-700 p-3 flex flex-col rounded gap-2"},ye={class:"flex items-center justify-between text-lg font-semibold"},ge={class:"flex items-center gap-2"},he=["src"],be={key:0,class:"text-xs"},xe={class:"hidden md:table-cell"},we=["src"],$e={class:"hidden md:table-cell"},ke={class:"hidden md:table-cell"},Ce={class:"hidden md:table-cell"},Ee={__name:"TestMode",setup(l){const{card:e,virtualPOS:n,assetsUrl:i,isTestMode:t}=y(f()),m=a=>{e.value.bin=a.bin,e.value.expiry_year=a.expiry_year,e.value.expiry_month=a.expiry_month,e.value.expiry=`${a.expiry_month} / ${a.expiry_year}`,e.value.cvv=a.cvv};return(a,d)=>r(t)?(u(),c("div",fe,[o("div",ye,[o("div",ge,[p(r(K),{class:"w-6"}),V(v(a.$t("test_mode_title")),1)]),o("img",{src:r(n).logo,class:"w-[80px]"},null,8,he)]),o("div",null,v(a.$t("test_mode_checkout_desc")),1),r(n).test_cards.length>0?(u(),c("table",be,[o("tr",null,[d[0]||(d[0]=o("th",null,null,-1)),o("th",null,v(a.$t("card_bin")),1),o("th",xe,v(a.$t("month_year")),1),d[1]||(d[1]=o("th",{class:"hidden md:table-cell"}," Cvc ",-1)),d[2]||(d[2]=o("th",{class:"hidden md:table-cell"}," 3ds ",-1)),d[3]||(d[3]=o("th",null,null,-1))]),o("tbody",null,[(u(!0),c(A,null,j(r(n).test_cards,(s,g)=>(u(),c("tr",{key:g,class:"!border-b !border-yellow-700"},[o("td",null,[o("img",{class:"!w-8",src:`${r(i)}/images/card/${s.brand}.svg`},null,8,we)]),o("td",null,v(s.bin),1),o("td",$e,v(s.expiry_month)+"/"+v(s.expiry_year),1),o("td",ke,v(s.cvv),1),o("td",Ce,v(s.secure),1),o("td",null,[p(r(X),{class:"!w-6 cursor-pointer",onClick:I=>m(s)},null,8,["onClick"])])]))),128))])])):x("",!0)])):x("",!0)}},Se={class:"inline-flex relative !rounded-l items-center justify-start text-sm !bg-white !w-12 !min-w-max"},Fe=["placeholder"],Ve={__name:"HolderName",setup(l){const{formSettings:e}=f(),n=$(!1);return(i,t)=>r(e).holder_name_field?(u(),c("div",{key:0,class:E(`flex w-full border !rounded ${n.value?"border-blue-700":"border-gray-300"}`)},[o("span",Se,[p(r(Z),{class:"w-6 h-6 mx-3","aria-hidden":"true"})]),o("input",{id:"gpos-card-holder-name",type:"text",placeholder:i.$t("name_on_card"),onFocus:t[0]||(t[0]=m=>n.value=!n.value),onFocusout:t[1]||(t[1]=m=>n.value=!n.value)},null,40,Fe)],2)):x("",!0)}},Ae={},je={class:"dot-spinner mx-3"};function Te(l,e){return u(),c("div",je,e[0]||(e[0]=[ee('<div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div>',8)]))}const Ue=ue(Ae,[["render",Te]]),De={class:"inline-flex relative !rounded-l items-center justify-start text-sm !bg-white !w-12 !min-w-max"},Le=["src"],Ie={__name:"BinNumber",setup(l){const{card:e,assetsUrl:n}=y(f()),{loading:i}=y(ce()),t=$(!1);return(m,a)=>{const d=D("cardformat");return u(),c("div",{class:E(`flex w-full !border !rounded ${t.value?"!border-blue-700":"!border-gray-300"}`)},[o("span",De,[r(i)?(u(),S(Ue,{key:0,class:"!w-6 !h-6"})):["visa","mastercard","amex","troy"].includes(r(e).brand)?(u(),c("img",{key:1,class:"!w-12 !h-12 !m-0",src:`${r(n)}/images/card/${r(e).brand}.svg`},null,8,Le)):(u(),S(r(te),{key:2,class:"!w-6 h-6 !mx-3","aria-hidden":"true"}))]),w(o("input",{id:"gpos-card-bin","onUpdate:modelValue":a[0]||(a[0]=s=>r(e).bin=s),class:"",placeholder:"•••• •••• •••• ••••",inputmode:"numeric",type:"tel",autocomplete:"cc-number",onFocus:a[1]||(a[1]=s=>t.value=!t.value),onFocusout:a[2]||(a[2]=s=>t.value=!t.value)},null,544),[[T,r(e).bin],[d,void 0,"formatCardNumber"]])],2)}}},Pe={class:"inline-flex relative !rounded-l items-center justify-center text-sm !bg-white !w-12 !min-w-max"},Be={class:"flex w-full"},Re={value:""},Ne=["value","textContent"],Oe={value:""},qe=["value","textContent"],He={__name:"Select",setup(l){const e=f(),{card:n}=y(e),i=$(!1),t=new Date().getFullYear(),m=Array.from({length:17},(a,d)=>(t+d).toString());return(a,d)=>(u(),c("div",{class:E(`flex w-full !border !rounded ${i.value?"!border-blue-700":"!border-gray-300"}`)},[o("span",Pe,[p(r(z),{class:"!w-6 !h-6 !mx-3","aria-hidden":"true"})]),o("div",Be,[w(o("select",{id:"gpos-card-expiry-month","onUpdate:modelValue":d[0]||(d[0]=s=>r(n).expiry_month=s),autocomplete:"cc-exp-month",class:"!border-0 !rounded-r !bg-white !m-0 !p-3 !focus:ring-0 !outline-0 !focus:ring-offset-0 !w-1/2",onFocus:d[1]||(d[1]=s=>i.value=!i.value),onFocusout:d[2]||(d[2]=s=>i.value=!i.value)},[o("option",Re,v(a.$t("mm")),1),(u(),c(A,null,j(["01","02","03","04","05","06","07","08","09","10","11","12"],s=>o("option",{key:s,value:s,textContent:v(s)},null,8,Ne)),64))],544),[[P,r(n).expiry_month]]),w(o("select",{id:"gpos-card-expiry-year","onUpdate:modelValue":d[3]||(d[3]=s=>r(n).expiry_year=s),autocomplete:"cc-exp-year",class:"!border-0 !rounded-r !bg-white !m-0 !p-3 !focus:ring-0 !outline-0 !focus:ring-offset-0 !w-1/2",onFocus:d[4]||(d[4]=s=>i.value=!i.value),onFocusout:d[5]||(d[5]=s=>i.value=!i.value)},[o("option",Oe,v(a.$t("yy")),1),(u(!0),c(A,null,j(r(m),s=>(u(),c("option",{key:s,value:s,textContent:v(s)},null,8,qe))),128))],544),[[P,r(n).expiry_year]])])],2))}},Ye={class:"inline-flex relative !rounded-l items-center justify-center text-sm !bg-white !w-12 !min-w-max"},ze=["placeholder"],Me=["value"],Qe=["value"],Ge={__name:"Text",setup(l){const{card:e}=y(f()),n=$(!1),i=B(()=>{var m,a;return(a=(m=e.value.expiry)==null?void 0:m.replaceAll(/\s/g,""))==null?void 0:a.split("/")[0]}),t=B(()=>{var m,a,d;return(d=(a=(m=e.value.expiry)==null?void 0:m.replaceAll(/\s/g,""))==null?void 0:a.split("/")[1])==null?void 0:d.slice(-2)});return(m,a)=>{const d=D("cardformat");return u(),c("div",{class:E(`flex w-full !border !rounded ${n.value?"!border-blue-700":"!border-gray-300"}`)},[o("span",Ye,[p(r(z),{class:"!w-6 !h-6","aria-hidden":"true"})]),w(o("input",{id:"gpos-card-expiry","onUpdate:modelValue":a[0]||(a[0]=s=>r(e).expiry=s),placeholder:m.$t("mmyy"),inputmode:"numeric",type:"tel",autocomplete:"cc-exp",onFocus:a[1]||(a[1]=s=>n.value=!n.value),onFocusout:a[2]||(a[2]=s=>n.value=!n.value)},null,40,ze),[[T,r(e).expiry],[d,void 0,"formatCardExpiry"]]),o("input",{id:"gpos-card-expiry-month",type:"hidden",value:i.value},null,8,Me),o("input",{id:"gpos-card-expiry-year",type:"hidden",value:t.value},null,8,Qe)],2)}}},Je={__name:"Expiry",setup(l){const{formSettings:e}=f(),n=e.expiry_style=="select"?He:Ge;return(i,t)=>(u(),S(M(r(n))))}},We={class:"inline-flex relative !rounded-l !items-center justify-center text-sm !bg-white !w-12 !min-w-max"},Ke=["src"],Xe={__name:"Cvc",setup(l){const e=f(),{card:n,assetsUrl:i}=y(e),t=$(!1);return(m,a)=>{const d=D("cardformat");return u(),c("div",{class:E(`relative flex w-full !border !bg-white !rounded ${t.value?"!border-blue-700":"!border-gray-300"}`)},[o("span",We,[p(r(ne),{class:"!w-6 !h-6 !mx-3","aria-hidden":"true"})]),w(o("input",{id:"gpos-card-cvv","onUpdate:modelValue":a[0]||(a[0]=s=>r(n).cvv=s),placeholder:"CVC",inputmode:"numeric",type:"tel",autocomplete:"cc-csc",onFocus:a[1]||(a[1]=s=>t.value=!t.value),onFocusout:a[2]||(a[2]=s=>t.value=!t.value)},null,544),[[T,r(n).cvv],[d,void 0,"formatCardCVC"]]),o("span",{class:"inline-flex relative !rounded z-10 items-center justify-center text-sm !bg-white !w-12 !min-w-max !px-2",style:ae(`${t.value?"transform: rotateY(180deg);":""}   transform-style: preserve-3d;
        transition: transform 0.5s;`)},[a[3]||(a[3]=o("div",{class:"!w-6 !h-6 absolute","aria-hidden":"true",style:{"backface-visibility":"hidden"}},null,-1)),o("img",{class:"!w-8 !h-6 absolute",src:`${r(i)}/images/cvc.svg`,style:{"backface-visibility":"hidden",transform:"rotateY(180deg)"}},null,8,Ke)],4)],2)}}},Ze={class:"flex flex-col w-full gap-4"},et={class:"flex w-full flex-col gap-2 md:flex-row md:justify-between"},R={__name:"StandartForm",setup(l){return(e,n)=>(u(),c("div",Ze,[p(Ie),o("div",et,[p(Je),p(Xe)])]))}},tt={__name:"CardInputForm",setup(l){const{formSettings:e}=f(),n=()=>{switch(e.display_type){case"standart_form":return R;default:return R}};return(i,t)=>(u(),S(M(n())))}},nt={class:"inline-flex relative !rounded-l items-center justify-start text-sm !bg-white !w-12 !min-w-max"},at=["placeholder"],st={__name:"CardName",setup(l){const e=$(!1);return(n,i)=>(u(),c("div",{class:E(`flex w-full border !rounded ${e.value?"border-blue-700":"border-gray-300"}`)},[o("span",nt,[p(r(se),{class:"w-6 h-6 mx-3","aria-hidden":"true"})]),o("input",{id:"gpos-card-name",type:"text",placeholder:n.$t("card_name"),onFocus:i[0]||(i[0]=t=>e.value=!e.value),onFocusout:i[1]||(i[1]=t=>e.value=!e.value)},null,40,at)],2))}},ot={key:0,class:"flex flex-col my-2"},rt={key:0,class:"w-full flex items-center justify-start p-2 gap-2 bg-blue-50 border-blue-600 text-blue-800 border rounded"},lt={key:1,class:"text-sm font-medium text-gray-900 flex items-center gap-1 cursor-pointer"},it={__name:"SaveCard",setup(l){const{userId:e,cardSaveSettings:n,wcSubsSettings:i}=f(),{saveCurrentCard:t,virtualPOS:m}=y(f()),a=window.wc_checkout_params||!1;return(d,s)=>r(m).supports.includes("save_card")&&r(n).active?(u(),c("div",ot,[r(n).force_save&&r(i).save_info&&r(a)?(u(),c("div",rt,[p(r(Y),{class:"!w-6 !h-6 mt-1","aria-hidden":"true"}),V(" "+v(r(i).save_info),1)])):x("",!0),r(e)&&!r(n).force_save?(u(),c("label",lt,[w(o("input",{id:"gpos-save-card","onUpdate:modelValue":s[0]||(s[0]=g=>re(t)?t.value=g:null),type:"checkbox",value:"on",class:"border-gray-300 rounded !block !m-0"},null,512),[[oe,r(t)]]),V(" "+v(d.$t("save_card_checkout")),1)])):x("",!0),r(t)&&r(n).name_field==="show_field"?(u(),S(st,{key:2})):x("",!0)])):x("",!0)}},dt={class:"hidden"},ut=["id","onUpdate:modelValue"],ct={__name:"HiddenCardData",setup(l){const{card:e}=y(f());return(n,i)=>(u(),c("div",dt,[(u(),c(A,null,j(["type","brand","family","bank_name","bank_code","country","country_code"],t=>w(o("input",{id:`gpos-card-${t.replaceAll("_","-")}`,key:t,"onUpdate:modelValue":m=>r(e)[t]=m,type:"hidden"},null,8,ut),[[T,r(e)[t]]])),64))]))}},mt={class:"flex flex-col gap-4"},At={__name:"CardForm",setup(l){return(e,n)=>(u(),c("div",mt,[p(Ee),p(Ve),p(tt),p(it),p(ct)]))}},k=()=>{const l=window.jQuery;let e={};l(".gpos-checkout-class :input").each((n,i)=>{let t=l(i);if(!(t.attr("type")==="checkbox"&&!t.is(":checked"))){if(t.data("name")==="gpos-installment"){t.is(":checked")&&(e["gpos-installment-rate"]=t.data("rate"),e[t.data("name")]=t.val()),t.prop("tagName")==="SELECT"&&(e["gpos-installment-rate"]=t.find(":selected").data("rate"),e[t.data("name")]=t.find(":selected").val());return}t.attr("id")&&(e[t.attr("id")]=t.val())}}),document.dispatchEvent(new CustomEvent("gpos-inputs-changed",{detail:e}))},pt=function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}(),_t=function(l){return"/"+l},N={},F=function(e,n,i){let t=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),d=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));t=Promise.allSettled(n.map(s=>{if(s=_t(s),s in N)return;N[s]=!0;const g=s.endsWith(".css"),I=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${I}`))return;const h=document.createElement("link");if(h.rel=g?"stylesheet":pt,g||(h.as="script"),h.crossOrigin="",h.href=s,d&&h.setAttribute("nonce",d),document.head.appendChild(h),g)return new Promise((J,W)=>{h.addEventListener("load",J),h.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${s}`)))})}))}function m(a){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=a,window.dispatchEvent(d),!d.defaultPrevented)throw a}return t.then(a=>{for(const d of a||[])d.status==="rejected"&&m(d.reason);return e().catch(m)})};try{let l=!1;const e=window.jQuery,n=async()=>{l&&await l.unmount(),document.getElementById("app")&&(l=window.gposCreateCheckoutApplication(),setTimeout(()=>{k()},2))};setInterval(()=>{(typeof l!="object"||!l.mount)&&n()},1e3),e(document).ready(n),e(document.body).on("updated_checkout",n),e(document).on("give_gateway_loaded",n),e(document).on("give_option_change",n),e(".givewp-fields-gateways__gateway--gpos_givewp_v3 > label").on("click",()=>{setTimeout(n,100)}),e("input[name='radio-control-wc-payment-method-options']").on("change",function(i){i.target.value==="gpos"&&n()})}catch(l){console.error(l)}const{card:_,requested:b,binRetrieveReq:O,virtualPOS:vt,isInstallmentsActive:ft,installments:yt,plugin:gt,isProActive:Q,platformData:q,selectedInstallment:G,accountId:ht}=y(f(U)),{binRetrieve:bt,$:xt}=f(U);document.addEventListener("gpos-inputs-changed",async()=>{var i;const l=(i=_.value.bin)==null?void 0:i.replace(/\D/g,"").slice(0,8),e=G.value,n=q.value.amount;if(!l||l.length<8){b.value.bin="",_.value.type="",_.value.brand="",_.value.family="",_.value.bank_name="",_.value.bank_code="",_.value.country="",_.value.country_code="";return}(b.value.bin!==l||b.value.installment!==e||b.value.amount!==n)&&(b.value.bin=l,b.value.installment=e,b.value.amount=n,O.value&&O.value.abort(),await bt({bin:l,plugin:gt.value,platform_data:q.value,installment:e}).then(t=>{Q.value&&(vt.value=t==null?void 0:t.virtual_pos,yt.value=t==null?void 0:t.installments,ft.value=t==null?void 0:t.is_installments_active),_.value.type=t.card.type,_.value.brand=t.card.brand,_.value.family=t.card.family,_.value.bank_name=t.bank.name,_.value.bank_code=t.bank.code,_.value.country_code=t.country.code,_.value.country=t.country.name}),k())});L(_,k,{deep:!0});L(ht,k,{deep:!0});Q.value&&L(G,k,{deep:!0});xt(document).on({input:k},".gpos-checkout-class :input");const{platformData:wt}=y(f(U));document.addEventListener("gpos-platform-data-changed",async l=>{wt.value=l.detail});window.gposDispatchAmount=l=>{document.dispatchEvent(new CustomEvent("gpos-platform-data-changed",{detail:l})),k()};var H;switch((H=window.gpos)==null?void 0:H.plugin){case"elementor":F(()=>import("./elementor-3-7-79.js"),[]);break;case"woocommerce":F(()=>import("./woocommerce-3-7-79.js"),[]);break;case"ninja_forms":F(()=>import("./ninja-forms-3-7-79.js"),[]);break;case"wpforms":F(()=>import("./wpforms-3-7-79.js"),[]);break}function jt(l){window.gposCreateCheckoutApplication=()=>{const e=le({locale:"en",messages:window.gpos.strings,legacy:!1}),n=ie(l);return n.use(de),n.use(U),n.use(e),n.mount("#app"),document.dispatchEvent(new CustomEvent("gpos-form-loaded",{detail:window.gpos})),n}}export{Ue as S,At as _,Ft as a,Vt as b,jt as c,st as d,k as i};
