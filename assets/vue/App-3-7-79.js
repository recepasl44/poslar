import{l as G,S as D,c as _,o as r,g as m,a as t,h as y,u as e,D as L,t as i,s as A,y as $,e as k,b as w,f as x,F as f,j as V,w as C,q as S,n as I,x as R,K as F,at as P,E as Y,af as M,au as K,k as H,H as E,d as Q,C as q,av as W,a2 as Z,a9 as J,a7 as X}from"./vendor-3-7-79.js";import{u as N,_ as O,a as ee}from"./Page-3-7-79.js";import{_ as te}from"./TestMode-3-7-79.js";import{a as v}from"./ajax-3-7-79.js";import{a as z,_ as se}from"./OutlineButton-3-7-79.js";import{_ as T}from"./PrimaryButton-3-7-79.js";import{_ as ae}from"./Warning-3-7-79.js";const b=G("GatewayAccount",{state:()=>({gatewayAccount:window.gpos.gateway_account||{},assetsUrl:window.gpos.assets_url||"/"}),actions:{async updateAccountSettings(){const g=await v.post("update_account_settings",{id:this.gatewayAccount.id,gateway_id:this.gatewayAccount.gateway_id,settings:this.gatewayAccount.gateway_settings});this.swal(this.gatewayAccount.gateway_property.save_message.message,this.gatewayAccount.gateway_property.save_message.type),g&&(this.gatewayAccount.id=g.id)},async updateGatewayAccount(){},async updateInstallments(){await v.post("update_installments",{id:this.gatewayAccount.id,installments:this.gatewayAccount.installments}),this.swal(window.gpos.alert_texts.setting_saved)},async resetInstallments(){await v.post("update_installments",{id:this.gatewayAccount.id,installments:!1}),this.swal(window.gpos.alert_texts.setting_saved,"success",()=>{window.location.reload()})},async getInstallments(){const g=await v.post("get_installments_from_api",{id:this.gatewayAccount.id});let l={};g.result==="success"?(this.gatewayAccount.installments=g.installments,l={text:window.gpos.alert_texts.installments_applied,icon:"success"}):l={text:`${window.gpos.alert_texts.installments_get_error} : ${g.installments}`,icon:"error"},this.swal(l.text,l.icon)},async updateInstallmentStatus(){await v.post("update_installment_status",{id:this.gatewayAccount.id,status:this.gatewayAccount.is_installments_active})},async testConnection(g){const l=await v.post("check_connection",{gateway_id:g,settings:this.gatewayAccount.gateway_settings});this.swal(l.message,l.result)},async deleteAccount(){await v.post("remove_gateway_account",{id:this.gatewayAccount.id}),this.swal(window.gpos.alert_texts.deletion_completed,"success",()=>{window.location.href="/wp-admin/admin.php?page=gpos-payment-methods"})},swal(g,l="success",s){D.fire({html:g,icon:l,confirmButtonText:window.gpos.alert_texts.ok,confirmButtonColor:"#1A56DB"}).then(s)}}}),le={class:"w-full flex justify-between items-center border border-gray-100 rounded-lg p-5 bg-white shadow-md"},ne={__name:"TestDelete",setup(g){const{deleteAccount:l}=b(),s=()=>{D.fire({html:window.gpos.alert_texts.remove_gateway,icon:"info",confirmButtonText:window.gpos.alert_texts.yes,cancelButtonText:window.gpos.alert_texts.cancel,confirmButtonColor:"#1A56DB",showCancelButton:!0}).then(o=>{o.isConfirmed&&l()})};return(o,u)=>(r(),_("div",le,[m(te),t("button",{id:"gpos-delete-account",class:"text-xs text-red-600 flex gap-1 items-center font-medium",onClick:u[0]||(u[0]=c=>s())},[m(e(L),{class:"w-5 h-5"}),y(i(o.$t("delete_gateway")),1)])]))}},oe={class:"w-full flex flex-wrap"},re={class:"flex gap-1 items-center mb-2"},de={class:"block text-sm font-medium text-gray-900"},ie=["id","onUpdate:modelValue","placeholder"],ce=["id","onUpdate:modelValue","multiple"],ue=["value"],_e={key:2,class:"mt-1 text-xs text-gray-500"},pe={key:3,class:"text-red-500 text-sm"},me={__name:"ApiFieldCreator",emits:["validation-errors"],setup(g,{emit:l}){const{isTestMode:s}=A(N()),{gatewayAccount:o}=A(b()),u=l,c=$({}),p=()=>{const d={};o.value.gateway_property.fields.forEach(a=>{const n=o.value.gateway_settings[s.value?`test_${a.model}`:a.model];!n&&n.length===0&&(d[s.value?`test_${a.model}`:a.model]=`${a.label} alanÄ± zorunludur.`)}),Object.keys(d).length>=0&&u("validation-errors",d),c.value=d};return(d,a)=>(r(),_("div",oe,[e(s)?(r(),k(ae,{key:0,class:"m-2 p-2 w-full"},{content:x(()=>[y(i(d.$t("test_mode_content")),1)]),default:x(()=>[y(i(d.$t("test_mode_title"))+" ",1)]),_:1})):w("",!0),(r(!0),_(f,null,V(e(o).gateway_property.fields,(n,h)=>(r(),_("div",{key:h,class:"w-1/2 p-2"},[t("div",re,[t("label",de,i(e(s)?"Test":"")+" "+i(n.label),1)]),n.type==="text"?C((r(),_("input",{key:0,id:`${e(o).gateway_property.id}-${n.model}`,"onUpdate:modelValue":U=>e(o).gateway_settings[e(s)?`test_${n.model}`:n.model]=U,type:"text",class:I(`!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3 ${e(s)?"placeholder:text-gray-300":"placeholder:text-gray-600"} ${c.value[e(s)?`test_${n.model}`:n.model]?"!border-red-500 focus:ring-red-500 focus:border-red-500":"!border-gray-300"}`),placeholder:n.label,required:"",onInput:p},null,42,ie)),[[S,e(o).gateway_settings[e(s)?`test_${n.model}`:n.model]]]):w("",!0),n.type==="select"?C((r(),_("select",{key:1,id:`${e(o).gateway_property.id}-${n.model}`,"onUpdate:modelValue":U=>e(o).gateway_settings[e(s)?`test_${n.model}`:n.model]=U,multiple:n.multiple,class:"!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3",onChange:p},[(r(!0),_(f,null,V(n.options,(U,B)=>(r(),_("option",{key:B,value:B},i(U),9,ue))),128))],40,ce)),[[R,e(o).gateway_settings[e(s)?`test_${n.model}`:n.model]]]):w("",!0),n.desc?(r(),_("p",_e,i(n.desc),1)):w("",!0),c.value[e(s)?`test_${n.model}`:n.model]?(r(),_("span",pe,i(c.value[e(s)?`test_${n.model}`:n.model]),1)):w("",!0)]))),128))]))}},ge={key:0},ye={class:"block text-base font-medium text-gray-900 mt-5"},we=["placeholder"],be={class:"mt-5 p-3 bg-gray-100 border border-gray-300 rounded-lg pt-3"},xe={class:"block text-sm font-medium text-gray-900"},he={class:"block text-base font-semibold text-blue-600"},fe={key:1,class:"text-blue-600",textContent:"copied !"},$e={__name:"HexCode",setup(g){const{gatewayAccount:l}=b(),s=$(""),o=$(""),u=()=>{const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let h=0;h<24;h++)n+=a.charAt(Math.floor(Math.random()*a.length));return n};F(()=>{s.value=u()});const c=()=>{const a=M.util.encodeUtf8(s.value);o.value=M.util.bytesToHex(a)};let p=$(!0);const d=async a=>{await navigator.clipboard.writeText(a),p.value=!1,setTimeout(()=>{p.value=!0},1e3)};return(a,n)=>e(l).gateway_property.id==="garanti"?(r(),_("div",ge,[t("label",ye,i(a.$t("hex_code_description")),1),C(t("input",{"onUpdate:modelValue":n[0]||(n[0]=h=>s.value=h),type:"text",maxlength:"24",minlength:"24",placeholder:a.$t("hex_code_placeholder"),class:"!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-base !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3 placeholder:text-gray-600 mt-4"},null,8,we),[[S,s.value]]),m(T,{class:"mt-5",disabled:s.value.length!==24,onClick:c},{default:x(()=>[m(e(P),{class:"w-4 h-4 mr-2"}),y(" "+i(a.$t("hex_code_converter")),1)]),_:1},8,["disabled"]),t("div",be,[t("label",xe,i(a.$t("hex_code")),1),t("span",he,i(o.value),1),o.value.length!=0?(r(),_("span",{key:0,class:"cursor-pointer",onClick:n[1]||(n[1]=h=>d(o.value))},[e(p)?(r(),k(e(Y),{key:0,class:"w-4 h-4 text-blue-600"})):(r(),_("span",fe))])):w("",!0)])])):w("",!0)}},ve={class:"w-full flex gap-10 bg-white p-6 rounded-lg shadow-md"},ke={key:0,class:"w-3/5 flex flex-col gap-6"},Ae={class:"flex w-full justify-start gap-2 p-2"},Ve={class:"w-2/5"},Ce={class:"w-full flex flex-col gap-2"},Ue={class:"flex justify-between items-start"},je=["src"],Se=["innerHTML"],Te={class:"flex flex-row space-x-5"},Ie=["href"],Be=["href"],Me={__name:"ApiFields",setup(g){const{testConnection:l,updateAccountSettings:s}=b(),{gatewayAccount:o}=b(),u=$({}),c=$(!0);function p(a){u.value=a,c.value=!1}const d=()=>o.gateway_property.id!=="dummy_payment"?!1:!(!c.value&&Object.keys(u.value).length===0);return(a,n)=>(r(),_("div",ve,[e(o).gateway_property.id!=="dummy_payment"?(r(),_("div",ke,[m(me,{onValidationErrors:p}),t("div",Ae,[e(o).gateway_property.check_connection_is_available?(r(),k(z,{key:0,onClick:n[0]||(n[0]=h=>e(l)(e(o).gateway_property.id))},{default:x(()=>[m(e(K),{class:"w-4 h-4 mr-2"}),y(i(a.$t("connect_test")),1)]),_:1})):w("",!0),m(T,{id:"gpos-save-settings",disabled:d(),onClick:n[1]||(n[1]=h=>e(s)())},{default:x(()=>[m(e(H),{class:"w-4 h-4 mr-2"}),y(i(a.$t("save_settings")),1)]),_:1},8,["disabled"])])])):w("",!0),t("div",Ve,[t("div",Ce,[t("div",Ue,[t("img",{class:"w-1/4",src:e(o).gateway_property.logo},null,8,je)]),t("p",{class:"text-lg text-gray-500",innerHTML:a.$t(`${e(o).gateway_id}.description`)},null,8,Se),t("div",Te,[t("a",{href:e(o).gateway_property.merchant_panel,target:"_blank",class:"mt-2 text-blue-700 text-sm flex gap-1 items-center"},[y(i(a.$t("merchant_panel")),1),m(e(E),{class:"w-3 h-3 text-blue-700"})],8,Ie),e(o).gateway_property.help_document?(r(),_("a",{key:0,href:e(o).gateway_property.help_document,target:"_blank",class:"mt-2 text-blue-700 text-sm flex gap-1 items-center"},[y(i(a.$t("help_document")),1),m(e(E),{class:"w-3 h-3 text-blue-700"})],8,Be)):w("",!0)])]),m($e)])]))}},Ee={__name:"AutoFill",setup(g){const{getInstallments:l,gatewayAccount:s}=b();return(o,u)=>e(s).gateway_property.supports.includes("installment_api")?(r(),k(z,{key:0,onClick:u[0]||(u[0]=c=>e(l)())},{default:x(()=>[y(i(o.$t("get_installment_rates")),1)]),_:1})):w("",!0)}},De={class:"flex"},Fe={class:"!bg-gray-200 !border !border-r-0 !border-gray-300 !text-gray-900 !text-md !rounded-l-md p-1 w-1/4 text-center font-semibold"},He=["disabled"],j={__name:"InstallmentInput",props:{modelValue:{type:[String,Number],required:!0},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},label:{type:String,default:""},rate:{type:Object,required:!0}},emits:["update:modelValue"],setup(g,{emit:l}){const s=g,o=l,u=Q({get(){return s.modelValue},set(c){o("update:modelValue",c)}});return(c,p)=>(r(),_("div",De,[t("div",Fe,i(g.label),1),C(t("input",{"onUpdate:modelValue":p[0]||(p[0]=d=>u.value=d),disabled:!g.rate.enabled,type:"text",style:{"border-radius":"0 !important"},class:I(`!border !border-l-0 !border-gray-300 !text-gray-900 !text-sm !rounded-r-md w-3/4 ${g.rate.enabled?"!bg-white":"!bg-gray-200"}`)},null,10,He),[[S,u.value]])]))}},qe={class:"flex flex-col gap-2 justify-center rounded-lg p-2 bg-slate-200"},Ne={class:"border text-left !rounded-lg bg-white"},ze={class:"px-2 py-1 w-1/12"},Ge={class:"px-2 py-1 w-1/12"},Le=["onUpdate:modelValue"],Re={class:"px-2 py-1 w-5/12"},Pe={class:"px-2 py-1 w-5/12"},Ye={class:"flex gap-4 h-8 justify-center"},Ke={__name:"ApplyAll",setup(g){const{gatewayAccount:l}=A(b()),s=$([{number:2,enabled:!1,rate:"",extra:""},{number:3,enabled:!1,rate:"",extra:""},{number:4,enabled:!1,rate:"",extra:""},{number:5,enabled:!1,rate:"",extra:""},{number:6,enabled:!1,rate:"",extra:""},{number:7,enabled:!1,rate:"",extra:""},{number:8,enabled:!1,rate:"",extra:""},{number:9,enabled:!1,rate:"",extra:""},{number:10,enabled:!1,rate:"",extra:""},{number:11,enabled:!1,rate:"",extra:""},{number:12,enabled:!1,rate:"",extra:""}]),o=()=>{Object.keys(l.value.installments).forEach(u=>{s.value.forEach(c=>{l.value.installments[u][c.number].enabled=c.enabled,l.value.installments[u][c.number].rate=c.rate,l.value.installments[u][c.number].extra=c.extra})})};return(u,c)=>(r(),_("div",qe,[t("table",Ne,[(r(!0),_(f,null,V(s.value,p=>(r(),_("tr",{key:p.number,class:"border-b"},[t("td",ze,i(p.number),1),t("td",Ge,[C(t("input",{"onUpdate:modelValue":d=>p.enabled=d,type:"checkbox",class:"text-blue-600 bg-gray-100 border-gray-300 rounded"},null,8,Le),[[q,p.enabled]])]),t("td",Re,[m(j,{modelValue:p.rate,"onUpdate:modelValue":d=>p.rate=d,rate:p,label:"%"},null,8,["modelValue","onUpdate:modelValue","rate"])]),t("td",Pe,[m(j,{modelValue:p.extra,"onUpdate:modelValue":d=>p.extra=d,rate:p,label:"+"},null,8,["modelValue","onUpdate:modelValue","rate"])])]))),128))]),t("div",Ye,[t("div",{class:"py-2 px-3 bg-white text-blue-600 rounded-lg border border-blue-600 flex justify-center items-center cursor-pointer",onClick:c[0]||(c[0]=p=>o())},i(u.$t("apply_all")),1)])]))}},Qe={class:"w-full grid grid-cols-4 gap-6"},We={class:"flex gap-4 h-8"},Ze=["src"],Je={class:"px-2 py-1 w-10/12 font-semibold text-center"},Xe={class:"border text-left !rounded-lg bg-white"},Oe={class:"px-2 py-1 w-1/12"},et={class:"px-2 py-1 w-1/12"},tt=["onUpdate:modelValue"],st={class:"px-2 py-1 w-5/12"},at={class:"px-2 py-1 w-5/12"},lt={__name:"RateTable",setup(g){const{gatewayAccount:l,assetsUrl:s}=A(b());return(o,u)=>(r(),_("div",Qe,[m(Ke),(r(!0),_(f,null,V(e(l).installments,(c,p)=>(r(),_("div",{key:p,class:"flex flex-col gap-2 rounded-lg p-2 bg-slate-200"},[t("div",We,[t("img",{src:`${e(s)}/images/card/${p}.svg`,class:"rounded-lg w-8 h-8"},null,8,Ze),t("div",Je,i(o.$t(p)),1)]),t("table",Xe,[(r(!0),_(f,null,V(c,d=>(r(),_("tr",{key:d.number,class:"border-b"},[t("td",Oe,i(d.number),1),t("td",et,[C(t("input",{"onUpdate:modelValue":a=>d.enabled=a,type:"checkbox",class:"text-blue-600 bg-gray-100 border-gray-300 rounded"},null,8,tt),[[q,d.enabled]])]),t("td",st,[m(j,{modelValue:d.rate,"onUpdate:modelValue":a=>d.rate=a,rate:d,label:"%"},null,8,["modelValue","onUpdate:modelValue","rate"])]),t("td",at,[m(j,{modelValue:d.extra,"onUpdate:modelValue":a=>d.extra=a,rate:d,label:"+"},null,8,["modelValue","onUpdate:modelValue","rate"])])]))),128))])]))),128))]))}},nt={class:"w-full flex flex-col gap-6 bg-white p-6 rounded-lg shadow-md"},ot={class:"text-2xl w-full flex justify-between font-bold text-[#111928]"},rt={class:"w-full flex items-center justify-between"},dt={key:0,class:"flex gap-4"},it={class:"text-red-600 font-semibold"},ct={class:"flex gap-2 justify-between items-end"},ut={class:"flex items-center gap-4"},_t={__name:"Installments",setup(g){const{gatewayAccount:l}=A(b()),{updateInstallmentStatus:s,updateInstallments:o,resetInstallments:u}=b(),c=$(!1),p=()=>{c.value=!0,setTimeout(()=>{c.value=!1},2e3)};return(d,a)=>(r(),_("div",nt,[t("div",ot,[y(i(d.$t("installment_options"))+" ",1),m(O,{video:"https://www.youtube.com/watch?v=hhMeZ6rx78Y"})]),t("div",rt,[m(se,{modelValue:e(l).is_installments_active,"onUpdate:modelValue":a[0]||(a[0]=n=>e(l).is_installments_active=n),onChange:a[1]||(a[1]=n=>e(s)())},{default:x(()=>[y(i(d.$t("activate_installment")),1)]),_:1},8,["modelValue"]),e(l).is_installments_active?(r(),_("div",dt,[m(Ee),m(T,{class:"w-max",onClick:a[2]||(a[2]=n=>e(o)())},{default:x(()=>[m(e(H),{class:"w-4 h-4 mr-2"}),y(" "+i(d.$t("save_installment_rates")),1)]),_:1})])):w("",!0)]),e(l).is_installments_active?(r(),_(f,{key:0},[t("div",null,[y(i(d.$t("installments_desc"))+" ",1),a[5]||(a[5]=t("br",null,null,-1)),a[6]||(a[6]=y()),t("span",it,i(d.$t("note"))+" :",1),y(" "+i(d.$t("extra_installment_desc")),1)]),m(lt),t("div",ct,[t("div",ut,[t("div",{class:"cursor-pointer",onClick:a[3]||(a[3]=n=>p())},i(d.$t("reset_installments")),1),t("span",{class:I(`${c.value?"animate-ping ":""}text-red-600 underline cursor-pointer mr-4`),onClick:a[4]||(a[4]=n=>e(u)())},i(d.$t("reset_settings")),3)])])],64)):w("",!0)]))}},pt={class:"bg-white p-6 rounded-lg shadow-md flex flex-col gap-3"},mt={class:"text-2xl font-bold text-[#111928]"},gt={class:"w-full flex flex-wrap gap-5 mt-4"},yt={class:"text-base"},wt={class:"text-2xl font-bold text-[#111928]"},bt={class:"flex items-center flex-wrap break-words bg-gray-50 rounded-lg py-4 px-3"},xt={class:"flex gap-2 items-center"},ht={class:"text-xs text-gray-900 font-medium"},ft={__name:"Supports",setup(g){const{gatewayAccount:l}=b();return(s,o)=>(r(),_("div",pt,[e(l).gateway_property.supports.length?(r(),_(f,{key:0},[t("span",mt,i(s.$t("supports_features")),1),t("div",gt,[(r(!0),_(f,null,V(e(l).gateway_property.supports,(u,c)=>(r(),_("div",{key:c,class:"w-72 flex justify-between py-4 px-3 bg-gray-50 rounded-lg items-center"},[t("span",yt,i(s.$t(u)),1),m(e(W),{class:"w-6 h-6 text-green-300"})]))),128))])],64)):w("",!0),t("span",wt,i(s.$t("supports_currency")),1),t("div",bt,[t("div",xt,[m(e(Z),{class:"w-5 h-5 text-gray-900"}),t("span",ht,i(e(l).gateway_property.currencies.join(", ")),1)])])]))}},$t={class:"bg-white p-6 rounded-lg shadow-md flex flex-col gap-3"},vt={class:"text-2xl font-bold text-[#111928]"},kt={class:"flex gap-3"},At={class:"flex"},Vt=["onUpdate:modelValue"],Ct={class:""},Ut={__name:"WorldPAYExtra",setup(g){const{updateAccountSettings:l}=b(),{gatewayAccount:s}=A(b());return F(()=>{typeof s.value.gateway_settings.installments=="string"&&(s.value.gateway_settings.installments={2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:"",11:"",12:""})}),(o,u)=>(r(),_("div",$t,[t("span",vt,i(o.$t("installment_options")),1),t("div",kt,[(r(!0),_(f,null,V(e(s).gateway_settings.installments,(c,p)=>(r(),_("div",{key:p,class:"flex items-center flex-col"},[t("span",null,i(p),1),t("div",At,[u[0]||(u[0]=t("div",{class:"!bg-gray-200 !border !border-r-0 !border-gray-300 !text-gray-900 !text-md !rounded-l-md p-1"}," % ",-1)),C(t("input",{"onUpdate:modelValue":d=>e(s).gateway_settings.installments[p]=d,type:"text",style:{"border-radius":"0 !important"},class:"!border !border-l-0 !border-gray-300 !text-gray-900 !text-sm !rounded-r-md w-12 !bg-white"},null,8,Vt),[[S,e(s).gateway_settings.installments[p]]])])]))),128))]),t("span",Ct,i(o.$t(`${e(s).gateway_id}.installment_desc`)),1),t("div",null,[m(T,{id:"gpos-save-settings",onClick:e(l)},{default:x(()=>[y(i(o.$t("save_settings")),1)]),_:1},8,["onClick"])])]))}},jt={class:"text-blue-600 text-md"},St={class:"w-full flex flex-col gap-6"},Ht={__name:"App",setup(g){const{gatewayAccount:l}=A(b()),{paymentGateways:s}=N();J(()=>{l.value.gateway_property=s.find(c=>c.id===l.value.gateway_id);const u=window.jQuery;u("#toplevel_page_gurmepos").addClass("wp-has-current-submenu"),u(".toplevel_page_gurmepos").addClass("wp-has-current-submenu"),u("a[href='admin.php?page=gpos-payment-methods']").parent("li").addClass("current")});const o=()=>{window.history.back()};return(u,c)=>(r(),k(ee,{text:e(l).gateway_property.title,href:`https://yardim.gurmehub.com/docs/pos-entegrator/odeme-yontemleri/${e(l).gateway_property.id}-sanal-pos-ayarlar/`},{default:x(()=>[t("span",{class:"w-max flex gap-1 items-center my-4 cursor-pointer",onClick:o},[m(e(X),{class:"text-blue-600 w-6 h-6"}),t("span",jt,i(u.$t("back_to")),1)]),t("div",St,[m(ne),m(Me),e(l).gateway_property.id==="worldpay"?(r(),k(Ut,{key:0})):w("",!0),e(l).gateway_property.payment_method_type==="virtual_pos"?(r(),k(_t,{key:1})):w("",!0),m(ft)])]),_:1},8,["text","href"]))}};export{Ht as _};
